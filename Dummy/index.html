<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Dashboard Akuntansi</title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"
    />
    <link rel="stylesheet" href="/Dummy/static/css/style.css" />
  </head>
  <body>
    <!-- Navigation Bar -->
    <header>
      <nav>
        <ul class="nav-menu">
          <li style="background-color: #97ced1">
            <a href="index.html" style="color: rgb(255, 255, 255)">Dashboard</a>
          </li>
          <li><a href="Business.html">Business</a></li>
          <li><a href="Accounting.html">Accounting</a></li>
          <li><a href="Product.html">Product</a></li>
          <li><a href="Contacts.html">Contact Us</a></li>
        </ul>
      </nav>

      <div class="user-profile">
        <img
          src="/Dummy/static/img/ImageAcc.png"
          alt="User Profile"
          class="user-image"
          id="user-avatar"
        />
        <div class="dropdown" id="profile-dropdown">
          <button onclick="toggleDropdown()" class="dropbtn">▼</button>
          <div class="dropdown-content" id="dropdown-content">
            <!-- <a href="#">Account Settings</a> -->
            <a href="profile.html">Profile</a>
            <a href="LP.html">Logout</a>
          </div>
        </div>
      </div>
    </header>

    <!-- Main Dashboard -->
    <main class="dashboard">
      <!-- Business Bank Account Card -->
      <section class="card bank-account">
        <h2>Business Bank Account</h2>
        <p>306-234-12345678</p>
        <p>Reconciled <span class="balance">(100.00)</span></p>
        <div class="chart">
          <!-- Placeholder for chart -->
          <!-- <img src="/Dummy/static/img/chartplaceholder.webp" alt="Bank Balance Chart"> -->
          <canvas id="bankBalanceChart" width="400" height="200"></canvas>
        </div>
      </section>

      <!-- Account Watchlist -->
      <section class="card watchlist">
        <h2>Account Watchlist</h2>
        <ul>
          <li>Accounts Payable: 2,400.00</li>
          <li>Accounts Receivable: 5,345.00</li>
          <li>Advertising: 1,300.00</li>
        </ul>
      </section>

      <!-- Business Performance -->
      <section class="card performance">
        <h2>Business Performance</h2>
        <ul>
          <li>Accounts Payable Days: 1.60</li>
          <li>Accounts Receivable Days: 1.60</li>
        </ul>
      </section>

      <!-- Invoices Owed To You -->
      <section class="card invoices">
        <div id="invoicesOwedToYou">
          <h2>Invoices Owed To You</h2>
          <div id="invoicesOwed">
            <!-- Saved invoices will be displayed here -->
          </div>
        </div>
      </section>

      <!-- Recent Transactions -->
      <section class="card recent-transactions">
        <h2>Recent Transactions</h2>
        <ul>
          <li>Payment to Supplier: -300.00</li>
          <li>Received from Client: +450.00</li>
          <li>Office Supplies: -50.00</li>
          <li>Advertising: -200.00</li>
        </ul>
      </section>

      <!-- Budget Overview -->
      <section class="card budget-overview">
        <h2>Budget Overview</h2>
        <ul>
          <li>Total Budget: 10,000.00</li>
          <li>Spent: 4,500.00</li>
          <li>Remaining: 5,500.00</li>
        </ul>
      </section>

      <!-- Upcoming Payments -->
      <section class="card upcoming-payments">
        <h2>Upcoming Payments</h2>
        <ul>
          <li>Rent: 1,200.00 (Due: 2024-11-01)</li>
          <li>Utilities: 300.00 (Due: 2024-11-05)</li>
          <li>Subscription: 50.00 (Due: 2024-11-10)</li>
        </ul>
      </section>

      <!-- Alerts & Notifications -->
      <section class="card alerts">
        <h2>Alerts & Notifications</h2>
        <ul>
          <li>Overdue Invoice: 1,000.00</li>
          <li>Low Balance Alert: Checking Account</li>
          <li>New Message from Accountant</li>
        </ul>
      </section>

      <!-- Quick Actions -->
      <section class="card quick-actions">
        <h2>Quick Actions</h2>
        <button
          onclick="location.href='new_invoice.html'"
          class="action-button"
        >
          <img
            src="https://img.icons8.com/ios-glyphs/30/000000/invoice.png"
            alt="Create Invoice"
          />
          Create Invoice
        </button>
        <button onclick="location.href='Business.html'" class="action-button">
          <img
            src="https://img.icons8.com/ios-glyphs/30/000000/money-transfer.png"
            alt="Add Transaction"
          />
          Add Transaction
        </button>
        <button
          onclick="location.href='generate_report.html'"
          class="action-button"
        >
          <img
            src="https://img.icons8.com/ios-glyphs/30/000000/combo-chart.png"
            alt="Generate Report"
          />
          Generate Report
        </button>
      </section>
    </main>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
      const ctx = document.getElementById("bankBalanceChart").getContext("2d");
      const bankBalanceChart = new Chart(ctx, {
        type: "line", // Menggunakan grafik line
        data: {
          labels: [
            "Jan",
            "Feb",
            "Mar",
            "Apr",
            "May",
            "Jun",
            "Jul",
            "Aug",
            "Sep",
            "Oct",
            "Nov",
            "Dec",
          ], // Data tanggal
          datasets: [
          {
            label: "Investor Amount",
            data: [
              500, 1000, 800, 1100, 1000, 1200, 1200, 1300, 1500, 1200,
              1000, 1200,
            ], // Data dummy saldo
            borderColor: 'rgba(255, 205, 86, 0.7)',
            backgroundColor: "rgba(75, 192, 192, 0.2)",
            fill: true,
            tension: 0.4,
          },
            {
              label: "Profit Amount",
              data: [
                1000, 1200, 1500, 1300, 1700, 1800, 2000, 2100, 2300, 2500,
                2700, 3000,
              ], // Data dummy saldo
              borderColor: "rgba(75, 192, 192, 1)",
              backgroundColor: "rgba(75, 192, 192, 0.2)",
              fill: true,
              tension: 0.4,
            },
            {
              label: "Expenses Amount",
              data: [
                800, 1100, 1000, 1300, 1400, 1550, 1600, 1900, 1800, 1800,
                2000, 2000,
              ], // Data dummy saldo
              borderColor: 'rgba(255, 99, 132, 0.7)',
              backgroundColor: "rgba(75, 192, 192, 0.2)",
              fill: true,
              tension: 0.4,
            },
          ],
        },
        options: {
          responsive: true,
          plugins: {
            legend: {
              display: true,
              position: "top",
            },
          },
          scales: {
            x: {
              title: {
                display: true,
                text: "Month",
              },
            },
            y: {
              title: {
                display: true,
                text: "Amount ($)",
              },
              beginAtZero: true,
            },
          },
        },
      });

      //invoice

      function deleteInvoice(index) {
        const invoices = JSON.parse(localStorage.getItem("invoices")) || [];
        invoices.splice(index, 1);
        localStorage.setItem("invoices", JSON.stringify(invoices));
        loadInvoices(); // Refresh the invoice list
      }

      // Update loadInvoices to include delete button
      function loadInvoices() {
        const invoices = JSON.parse(localStorage.getItem("invoices")) || [];
        const invoicesContainer = document.getElementById("invoicesOwed");
        invoicesContainer.innerHTML = "";

        invoices.forEach((invoice, index) => {
          const invoiceCard = document.createElement("div");
          invoiceCard.className = "invoice-card";
          invoiceCard.innerHTML = `
            <p><strong>Invoice Number:</strong> ${invoice.invoiceNumber}</p>
            <p><strong>Client Name:</strong> ${invoice.clientName}</p>
            <p><strong>Amount:</strong> $${invoice.totalAmount}</p>
            <p><strong>Due Date:</strong> ${invoice.invoiceDate}</p>
            <button type="button" class="delete-btn" onclick="deleteInvoice(${index})">
                    <i class="fas fa-trash-alt"></i> <!-- Ikon tempat sampah untuk delete -->
                </button>
          `;
          invoicesContainer.appendChild(invoiceCard);
        });
      }

      // Load invoices on page load
      window.onload = loadInvoices;
    </script>
  </body>
</html>